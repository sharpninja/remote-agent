<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             x:Class="RemoteAgent.Desktop.Views.Panels.SecurityPanel">
  <Grid DataContext="{Binding CurrentServerViewModel.Security}"
        RowDefinitions="Auto,Auto,Auto,*,Auto,*"
        Margin="8">
    <TextBlock FontWeight="SemiBold" Text="Connection and Device Management" />
    <StackPanel Grid.Row="1" Orientation="Horizontal" Spacing="8">
      <Button x:Name="RefreshSecurityButton" Command="{Binding RefreshSecurityDataCommand}">Refresh</Button>
      <TextBlock VerticalAlignment="Center" Text="Ban Reason" />
      <TextBox Width="260" Text="{Binding BanReason}" Watermark="Optional reason" />
      <Button x:Name="BanPeerButton" Command="{Binding BanSelectedPeerCommand}">Ban Selected Peer</Button>
      <Button x:Name="UnbanPeerButton" Command="{Binding UnbanSelectedPeerCommand}">Unban Selected</Button>
    </StackPanel>
    <TextBlock Grid.Row="2" FontWeight="SemiBold" Text="Connected Peers" />
    <ListBox x:Name="ConnectedPeersList"
             Grid.Row="3"
             ItemsSource="{Binding ConnectedPeers}"
             SelectedItem="{Binding SelectedConnectedPeer}">
      <ListBox.ItemTemplate>
        <DataTemplate>
          <StackPanel Orientation="Horizontal" Spacing="6">
            <TextBlock Text="{Binding Peer}" />
            <TextBlock Text="active=" />
            <TextBlock Text="{Binding ActiveConnections}" />
          </StackPanel>
        </DataTemplate>
      </ListBox.ItemTemplate>
    </ListBox>
    <TextBlock Grid.Row="4" FontWeight="SemiBold" Text="Banned Devices / Peers" />
    <ListBox x:Name="BannedPeersList"
             Grid.Row="5"
             ItemsSource="{Binding BannedPeers}"
             SelectedItem="{Binding SelectedBannedPeer}">
      <ListBox.ItemTemplate>
        <DataTemplate>
          <StackPanel>
            <TextBlock Text="{Binding Peer}" />
            <TextBlock Opacity="0.7" Text="{Binding Reason}" TextWrapping="Wrap" />
          </StackPanel>
        </DataTemplate>
      </ListBox.ItemTemplate>
    </ListBox>
  </Grid>
</UserControl>
