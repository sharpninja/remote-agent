<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             x:Class="RemoteAgent.Desktop.Views.Panels.HistoryPanel">
  <Grid DataContext="{Binding CurrentServerViewModel.Security}"
        RowDefinitions="Auto,Auto,*,Auto,*"
        Margin="8">
    <SelectableTextBlock FontWeight="SemiBold" Text="Connection History" />
    <SelectableTextBlock Grid.Row="1" Opacity="0.7" Text="Most recent connection/message events and abandoned sessions." />
    <ListBox x:Name="ConnectionHistoryList"
             Grid.Row="2"
             ItemsSource="{Binding ConnectionHistory}">
      <ListBox.ItemTemplate>
        <DataTemplate>
          <StackPanel Orientation="Horizontal" Spacing="6">
            <SelectableTextBlock Text="{Binding TimestampUtc}" />
            <SelectableTextBlock Text="{Binding Peer}" />
            <SelectableTextBlock Text="{Binding Action}" />
            <SelectableTextBlock Text="{Binding Allowed}" />
          </StackPanel>
        </DataTemplate>
      </ListBox.ItemTemplate>
    </ListBox>
    <SelectableTextBlock Grid.Row="3" FontWeight="SemiBold" Text="Abandoned Sessions" />
    <ListBox x:Name="AbandonedSessionsList"
             Grid.Row="4"
             ItemsSource="{Binding AbandonedServerSessions}">
      <ListBox.ItemTemplate>
        <DataTemplate>
          <StackPanel>
            <SelectableTextBlock Text="{Binding SessionId}" />
            <SelectableTextBlock Opacity="0.7" Text="{Binding AgentId}" />
            <SelectableTextBlock Opacity="0.7" Text="{Binding Reason}" TextWrapping="Wrap" />
          </StackPanel>
        </DataTemplate>
      </ListBox.ItemTemplate>
    </ListBox>
  </Grid>
</UserControl>
